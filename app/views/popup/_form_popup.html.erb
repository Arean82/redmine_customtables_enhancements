# Partial for rendering a popup with custom forms related to an issue

<div id="custom-form-popup" style="display:none; background:#fff; border:1px solid #ccc; padding:10px;">
  <h3><%= l(:label_custom_form_popup) %></h3>
  <% if @issue && @issue.custom_tables.any? %>
    <% @issue.custom_tables.each do |table| %>
      <iframe src="<%= custom_table_path(table_id: table.id, issue_id: @issue.id) %>" 
              width="100%" height="400" style="border:none;"></iframe>
    <% end %>
  <% else %>
    <p><em>No forms defined for this project.</em></p>
  <% end %>
</div>

<%= link_to l(:button_open_form_popup), '#', id: 'open-form-btn', class: 'icon icon-edit' %>

<script>
document.getElementById('open-form-btn').onclick = function() {
  const popup = document.getElementById('custom-form-popup');
  popup.style.display = (popup.style.display === 'none') ? 'block' : 'none';
};
</script>
